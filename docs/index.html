<html>
<head>
	<title>Basic Buns NFT</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link href="bootstrap4-neon-glow.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css" rel="stylesheet">
	<style type="text/css">
		body { padding:48px 0; }
		a, a:hover { color:#29f1c3; }
		.row-underline { padding-bottom:1em; border-bottom:1px solid rgb(228, 226, 255); margin-bottom:1.5em; }
		.container-md { max-width:760px !important; }
		#content-main { align-self:center; } 
		#connect-button-container { padding-top:0.5em; }
		#examples { text-align:right; font-style:italic; }
	</style>
</head>
<body>
	<div class="container-md">
		<div class="row row-underline">
			<div class="col"><!-- HEADER -->
				<div style="float:right;padding-left:1em;text-align:right">
					Chain: Ethereum<br>
					Max supply: 1k<br>
					Price: 0.025 ETH
				</div>
				<div style="float:left;padding-right:1em">
(\__/)<br>
(&nbsp; •_•)<br>
/ &gt; A Millyverse NFT &bull; Claim now!
				</div>
				<h1 class="display-3" style="height:0;position:relative;left:1.3em;top:-1.8em;clear:both;">Basic Buns</h1>
			</div>
		</div>
		<div class="row row-underline">
			<div id="content-main" class="col">
				<div id="connect">
					<p>Basic Buns is the second NFT project by <a href="https://twitter.com/MidwitMilhouse" target="_blank">@MidwitMilhouse</a>. 1,000 Basic Buns are waiting for you on the Ethereum blockchain. 416 are available to claim for holders of the first 416 <a href="https://twitter.com/EmojiGardenNFT" target="_blank">Emoji Garden NFTs</a>, while 584 are available in a public mint for 0.025 ETH each.</p>
					<p>Basic Buns are totally random, generated and stored on-chain, and revealed immediately. They come with rich traits compatible with OpenSea. Plus, not all the creatures are bunnies... there are two more creature types that are rare and then really rare! What kind of bun will you get?</p>
					<p>Connect your Metamask wallet to mint your Basic Buns!<p>
					<p id="connect-button-container" class="text-center"><a id="web3-connect" href="#" class="btn btn-shadow btn-secondary text-mono">Connect Metamask</a></p>
				</div>
				<div id="mintable" style="display:none">
					<p>Connected wallet: <span id="wallet-address">...</span></p>
					<p>Total minted: <span id="total-supply">8</span> of <span id="max-supply">1000</span></p>
				</div>
				<div id="complete" style="display:none">
					<p>All Buns have been minted! Thank you!</p>
					<p>Check out the collection on <a href="https://opensea.io/collection/basic-buns" target="_blank">OpenSea</a>.</p>
				</div>
			</div>
			<div class="col" id="examples">
				<p><img src="examples.png" width="420" height="420" alt=""></p>
				<p>Example mints from testnet. Each bun is generated entirely on-chain using randomized data. They can be exported as images and plain text.</p>
			</div>
		</div>
		
	</div>

	<script src="https://unpkg.com/web3@latest/dist/web3.min.js"></script>
	<script type="text/javascript">
	var web3 = new Web3(Web3.givenProvider);
	var account = "";

	const bunnyContract = "0x6f13d82d5D501B2eebB94A34BbF8Bfdf20440079";
	const jsonInterface = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"basePrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"bunnySVG","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"bunnyString","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"claimToWithGarden","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"claimWithGarden","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"claimWithHonoraryGarden","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"emojiGardenContract","outputs":[{"internalType":"contract EmojiGardenInterface","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"endMint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"mint","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mintMulti","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256[]","name":"tokenIds","type":"uint256[]"}],"name":"multiClaimWithGardens","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"priceValue","type":"uint256"}],"name":"ownerSetPrice","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"value","type":"uint256"}],"name":"reduceSupply","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}];

	var contract = new web3.eth.Contract(jsonInterface, bunnyContract);

	document.getElementById('web3-connect').addEventListener('click', function(evt) {
		evt.preventDefault();
        getAccount();
    });

	async function getAccount() {
		const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
		account = accounts[0];
		document.getElementById('wallet-address').textContent = ''+account;
		document.getElementById('connect').style.display = 'none';
		const totalMinted = await contract.methods.totalSupply().call();
		const maxSupply = await contract.methods.maxSupply().call();
		contract.methods.ownerOf(1).call().then(function(response) {
			// public mint is done 
			document.getElementById('complete').style.display = 'block';
		}).catch(function(err) {
			// public mint is still open 
			enableMinting(totalMinted, maxSupply); 
		});
	}

	function enableMinting(totalSupply, maxSupply) {
		document.getElementById('total-supply').textContent = totalSupply;
		document.getElementById('max-supply').textContent = maxSupply;
		document.getElementById('mintable').style.display = 'block';
	}

	function showMintLoading() {
		document.getElementById('mint-result').textContent = "Loading...";
		document.getElementById('mint-result').style.display = 'block';
		document.getElementById('mint-buttons').style.display = 'none';
	}

	function showMintResult(outcome) {
		document.getElementById('mint-result').innerHTML = ''+outcome;
	}

	function showMintError(outcome) {
		document.getElementById('mint-result').innerHTML = ''+outcome;
	}
	</script>
</body>
</html>
